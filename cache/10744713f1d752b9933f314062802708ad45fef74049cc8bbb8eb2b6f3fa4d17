class ChipDrive{static SUCCESS_CODE=1;static FAILURE_CODE=2;static LOGIN_CODE=4;static ACL_READABLE=1;static ACL_WRITEABLE=2;static MSG_RESPONSE_MALFORMED="Unreadable response from server";static MSG_RESPONSE_ERROR="An error occurred with the server";static MSG_RESPONSE_TIMEOUT="Connection timeout with the server";static TIMEOUT=15e3;constructor(){this.setEndpoint(""),this.setFolder(""),this.setACL(0)}setEndpoint(e){this.endpoint=e}getEndpoint(){return this.endpoint}setFolder(e){this.folder=e}getFolder(){return this.folder}setACL(e){this.acl=e}getACL(){return this.acl}serialize(e){return e.join("|")}getDriveList(){return new Promise((t,i)=>{$.ajax({url:this.getEndpoint()+"/api/v2/drive/config",type:"POST",data:{},success:e=>{"object"==typeof e||"[object Array]"===Object.prototype.toString.call(e)?e.code===ChipDrive.SUCCESS_CODE?t(e.data):i(e.reason):i(ChipDrive.MSG_RESPONSE_MALFORMED)},error:e=>{"timeout"===e.statusText?i(ChipDrive.MSG_RESPONSE_TIMEOUT):i(ChipDrive.MSG_RESPONSE_ERROR)},timeout:ChipDrive.TIMEOUT})})}list(){return new Promise((t,i)=>{$.ajax({url:this.getEndpoint()+"/api/v2/drive/list",type:"POST",data:{folderid:this.folder},success:e=>{"object"==typeof e||"[object Array]"===Object.prototype.toString.call(e)?e.code===ChipDrive.SUCCESS_CODE?t(e.data):i(e.reason):i(ChipDrive.MSG_RESPONSE_MALFORMED)},error:e=>{"timeout"===e.statusText?i(ChipDrive.MSG_RESPONSE_TIMEOUT):i(ChipDrive.MSG_RESPONSE_ERROR)},timeout:ChipDrive.TIMEOUT})})}createFile(e){return new Promise((t,i)=>{$.ajax({url:this.getEndpoint()+"/api/v2/drive/file",type:"POST",data:{folderid:this.folder,name:e},success:e=>{"object"==typeof e||"[object Array]"===Object.prototype.toString.call(e)?e.code===ChipDrive.SUCCESS_CODE?t(e.data):i(e.reason):i(ChipDrive.MSG_RESPONSE_MALFORMED)},error:e=>{"timeout"===e.statusText?i(ChipDrive.MSG_RESPONSE_TIMEOUT):i(ChipDrive.MSG_RESPONSE_ERROR)},timeout:ChipDrive.TIMEOUT})})}createFolder(e){return new Promise((t,i)=>{$.ajax({url:this.getEndpoint()+"/api/v2/drive/folder",type:"POST",data:{folderid:this.folder,name:e},success:e=>{"object"==typeof e||"[object Array]"===Object.prototype.toString.call(e)?e.code===ChipDrive.SUCCESS_CODE?t(e.data):i(e.reason):i(ChipDrive.MSG_RESPONSE_MALFORMED)},error:e=>{"timeout"===e.statusText?i(ChipDrive.MSG_RESPONSE_TIMEOUT):i(ChipDrive.MSG_RESPONSE_ERROR)},timeout:ChipDrive.TIMEOUT})})}createHostingFolder(e){return new Promise((t,i)=>{$.ajax({url:this.getEndpoint()+"/api/v2/drive/hostingfolder",type:"POST",data:{folderid:this.folder,name:e},success:e=>{"object"==typeof e||"[object Array]"===Object.prototype.toString.call(e)?e.code===ChipDrive.SUCCESS_CODE?t(e.data):i(e.reason):i(ChipDrive.MSG_RESPONSE_MALFORMED)},error:e=>{"timeout"===e.statusText?i(ChipDrive.MSG_RESPONSE_TIMEOUT):i(ChipDrive.MSG_RESPONSE_ERROR)},timeout:ChipDrive.TIMEOUT})})}deleteItem(e){return new Promise((t,i)=>{$.ajax({url:this.getEndpoint()+"/api/v2/drive/object/delete",type:"POST",data:{id:e},success:e=>{"object"==typeof e||"[object Array]"===Object.prototype.toString.call(e)?e.code===ChipDrive.SUCCESS_CODE?t(e.data):i(e.reason):i(ChipDrive.MSG_RESPONSE_MALFORMED)},error:e=>{"timeout"===e.statusText?i(ChipDrive.MSG_RESPONSE_TIMEOUT):i(ChipDrive.MSG_RESPONSE_ERROR)},timeout:ChipDrive.TIMEOUT})})}renameItem(e,r){return new Promise((t,i)=>{$.ajax({url:this.getEndpoint()+"/api/v2/drive/object/rename",type:"POST",data:{id:e,name:r},success:e=>{"object"==typeof e||"[object Array]"===Object.prototype.toString.call(e)?e.code===ChipDrive.SUCCESS_CODE?t(e.data):i(e.reason):i(ChipDrive.MSG_RESPONSE_MALFORMED)},error:e=>{"timeout"===e.statusText?i(ChipDrive.MSG_RESPONSE_TIMEOUT):i(ChipDrive.MSG_RESPONSE_ERROR)},timeout:ChipDrive.TIMEOUT})})}put(e,r,o){return new Promise((t,i)=>{$.ajax({xhr:()=>{var e=new window.XMLHttpRequest;return o&&e.upload.addEventListener("progress",function(e){e.lengthComputable&&o(e.loaded/e.total*100)},!1),e},url:this.getStreamLink(r),type:"PUT",data:e,success:e=>{"object"==typeof e||"[object Array]"===Object.prototype.toString.call(e)?e.code===ChipDrive.SUCCESS_CODE?t(e.data):i(e.reason):i(ChipDrive.MSG_RESPONSE_MALFORMED)},error:e=>{"timeout"===e.statusText?i(ChipDrive.MSG_RESPONSE_TIMEOUT):i(ChipDrive.MSG_RESPONSE_ERROR)},cache:!1,contentType:"application/octet-stream",processData:!1})})}itemInfo(e){return new Promise((t,i)=>{$.ajax({url:this.getEndpoint()+"/api/v2/drive/object/info",type:"POST",data:{id:e},success:e=>{"object"==typeof e||"[object Array]"===Object.prototype.toString.call(e)?e.code===ChipDrive.SUCCESS_CODE?t(e.data):i(e.reason):i(ChipDrive.MSG_RESPONSE_MALFORMED)},error:e=>{"timeout"===e.statusText?i(ChipDrive.MSG_RESPONSE_TIMEOUT):i(ChipDrive.MSG_RESPONSE_ERROR)},timeout:ChipDrive.TIMEOUT})})}copy(e,r){return new Promise((t,i)=>{$.ajax({url:this.getEndpoint()+"/api/v2/drive/copy",type:"POST",data:{src:this.serialize(e),dst:r},success:e=>{"object"==typeof e||"[object Array]"===Object.prototype.toString.call(e)?e.code===ChipDrive.SUCCESS_CODE?t(e.data):i(e.reason):i(ChipDrive.MSG_RESPONSE_MALFORMED)},error:e=>{"timeout"===e.statusText?i(ChipDrive.MSG_RESPONSE_TIMEOUT):i(ChipDrive.MSG_RESPONSE_ERROR)},timeout:ChipDrive.TIMEOUT})})}cut(e,r){return new Promise((t,i)=>{$.ajax({url:this.getEndpoint()+"/api/v2/drive/cut",type:"POST",data:{src:this.serialize(e),dst:r},success:e=>{"object"==typeof e||"[object Array]"===Object.prototype.toString.call(e)?e.code===ChipDrive.SUCCESS_CODE?t(e.data):i(e.reason):i(ChipDrive.MSG_RESPONSE_MALFORMED)},error:e=>{"timeout"===e.statusText?i(ChipDrive.MSG_RESPONSE_TIMEOUT):i(ChipDrive.MSG_RESPONSE_ERROR)},timeout:ChipDrive.TIMEOUT})})}status(){return new Promise((t,i)=>{$.ajax({url:this.getEndpoint()+"/api/v2/drive/status",type:"POST",data:{},success:e=>{"object"==typeof e||"[object Array]"===Object.prototype.toString.call(e)?e.code===ChipDrive.SUCCESS_CODE?t(e.data):i(e.reason):i(ChipDrive.MSG_RESPONSE_MALFORMED)},error:e=>{"timeout"===e.statusText?i(ChipDrive.MSG_RESPONSE_TIMEOUT):i(ChipDrive.MSG_RESPONSE_ERROR)},timeout:ChipDrive.TIMEOUT})})}getTextRaw(e){return new Promise((t,i)=>{$.ajax({url:this.getEndpoint()+"/api/v2/drive/object/gettext",type:"POST",data:{id:e},success:e=>{"object"==typeof e||"[object Array]"===Object.prototype.toString.call(e)?e.code===ChipDrive.SUCCESS_CODE?t(e.data):i(e.reason):i(ChipDrive.MSG_RESPONSE_MALFORMED)},error:e=>{"timeout"===e.statusText?i(ChipDrive.MSG_RESPONSE_TIMEOUT):i(ChipDrive.MSG_RESPONSE_ERROR)},timeout:ChipDrive.TIMEOUT})})}getSiteSettings(e){return new Promise((t,i)=>{$.ajax({url:this.getEndpoint()+"/api/v2/drive/sitesettings",type:"POST",data:{id:e},success:e=>{"object"==typeof e||"[object Array]"===Object.prototype.toString.call(e)?e.code===ChipDrive.SUCCESS_CODE?t(e.data):i(e.reason):i(ChipDrive.MSG_RESPONSE_MALFORMED)},error:e=>{"timeout"===e.statusText?i(ChipDrive.MSG_RESPONSE_TIMEOUT):i(ChipDrive.MSG_RESPONSE_ERROR)},timeout:ChipDrive.TIMEOUT})})}getStreamLink(e){return this.getEndpoint()+"/api/v2/drive/object/"+encodeURI(e)}oauth(e){return new Promise((t,i)=>{$.ajax({url:this.getEndpoint()+"/api/v2/login/oauth",type:"POST",data:{},success:e=>{"object"==typeof e||"[object Array]"===Object.prototype.toString.call(e)?e.code===ChipDrive.SUCCESS_CODE?t(e.data):i(e.reason):i(ChipDrive.MSG_RESPONSE_MALFORMED)},error:e=>{"timeout"===e.statusText?i(ChipDrive.MSG_RESPONSE_TIMEOUT):i(ChipDrive.MSG_RESPONSE_ERROR)},timeout:ChipDrive.TIMEOUT})})}loginToken(e){return new Promise((t,i)=>{$.ajax({url:this.getEndpoint()+"/api/v2/oauth",type:"POST",data:{token:e},success:e=>{"object"==typeof e||"[object Array]"===Object.prototype.toString.call(e)?e.code===ChipDrive.SUCCESS_CODE?t(e.data):i(e.reason):i(ChipDrive.MSG_RESPONSE_MALFORMED)},error:e=>{"timeout"===e.statusText?i(ChipDrive.MSG_RESPONSE_TIMEOUT):i(ChipDrive.MSG_RESPONSE_ERROR)},timeout:ChipDrive.TIMEOUT})})}login(e,r){return new Promise((t,i)=>{$.ajax({url:this.getEndpoint()+"/api/v2/login",type:"POST",data:{username:e,password:r},success:e=>{"object"==typeof e||"[object Array]"===Object.prototype.toString.call(e)?e.code===ChipDrive.SUCCESS_CODE?t(e.data):i(e.reason):i(ChipDrive.MSG_RESPONSE_MALFORMED)},error:e=>{"timeout"===e.statusText?i(ChipDrive.MSG_RESPONSE_TIMEOUT):i(ChipDrive.MSG_RESPONSE_ERROR)},timeout:ChipDrive.TIMEOUT})})}logout(e,t){return new Promise((t,i)=>{$.ajax({url:this.getEndpoint()+"/api/v2/logout",type:"POST",data:{},success:e=>{"object"==typeof e||"[object Array]"===Object.prototype.toString.call(e)?e.code===ChipDrive.SUCCESS_CODE?t(e.data):i(e.reason):i(ChipDrive.MSG_RESPONSE_MALFORMED)},error:e=>{"timeout"===e.statusText?i(ChipDrive.MSG_RESPONSE_TIMEOUT):i(ChipDrive.MSG_RESPONSE_ERROR)},timeout:ChipDrive.TIMEOUT})})}}$(document).ready(()=>{new ChipDrive});